import{E as h,_ as E}from"./eventType.1710689391682.js";import{d as F,r as g,o as C,c as r,a as n,t as i,u as c,b as N,F as x,e as y,f as v,g as j,h as D,i as U,j as l,n as A,k as S}from"./index.1710689391682.js";const B={class:"bg-gradient-to-b from-gray-400 via-gray-800 to-black w-full min-h-screen"},O={class:"bg-gradient-to-t from-blue-200 to-gray-800 opacity-90 fixed w-full z-50 border-b-2 border-platinum h-header"},T={class:"flex p-3 max-w-8xl m-auto h-header"},V={class:"basis-1/3 sm:w-24 flex items-center"},z=n("img",{src:E,alt:"userImage"},null,-1),M={class:"text-zinc-100 text-pretty w-full"},P={key:0,class:"py-20 max-w-8xl m-auto px-3 text-2xl"},W={class:"flex flex-wrap justify-center p-2"},G={key:0,class:"min-h-full w-full bg-slate-300 rounded px-2 py-1 mb-2"},q={class:"text-base font-bold underline"},K={class:"w-full grid md:grid-cols-5 sm:grid-cols-2 gap-2"},$=["onClick"],H={class:"items-stretch"},J={class:"text-sm"},Q=S(" RoomId: "),X={class:"text-base font-bold underline"},Y={class:"font-thin text-sm md:my-4 sm:my-2"},Z={class:"font-thin text-sm md:my-4 sm:my-2"},ee={class:"font-thin text-sm"},ae=F({__name:"Lobby",setup(te){const t=j(),u=g(),m=g(!0);t.state.roomIsSubscribe=!1;const f={InitData:w,UpdateRoom:k};function I(){console.log("User cancelled the loader.")}C(()=>{t.state.socketInstance&&t.state.user.id!=null?(Object.entries(f).forEach(([e,o])=>{t.state.socketInstance.subscribe(e,o)}),_(),p()&&b()&&(t.state.useFirefoxAndNvidia=!0)):(t.commit("m_createWebSocket"),Object.entries(f).forEach(([e,o])=>{var a;(a=t.state.socketInstance)==null||a.subscribe(e,o)}))});function w(e){t.state.user.id=e.Id,R()}function k(e){e.RoomId==u.value&&D.push({name:"Room",query:{room:u.value}})}function R(){_(),p()&&b()&&(t.state.useFirefoxAndNvidia=!0)}function _(){var o;const e={Type:h.joinRoom,Data:{RoomId:"Lobby"}};(o=t.state.socketInstance)==null||o.wsSend(e)}function L(e){var a;u.value=e;const o={Type:h.joinRoom,Data:{RoomId:u.value}};(a=t.state.socketInstance)==null||a.wsSend(o)}function p(){var e=navigator.userAgent;return e.indexOf("Firefox")!=-1&&e.indexOf("Mobile")==-1}function b(){let e=document.createElement("canvas"),o,a,s,d="NVIDIA";try{if(o=e.getContext("webgl",{powerPreference:"high-performance"})||e.getContext("experimental-webgl",{powerPreference:"high-performance"}),o)return a=o.getExtension("WEBGL_debug_renderer_info"),s=o.getParameter(a.UNMASKED_VENDOR_WEBGL),!!s.toLowerCase().includes(d.toLowerCase())}catch{}}return(e,o)=>{const a=U("loading");return l(),r("div",B,[n("div",O,[n("header",T,[n("div",V,[z,n("div",null,[n("p",M,i(c(t).state.user.id),1)])])])]),N(a,{active:m.value,"onUpdate:active":o[0]||(o[0]=s=>m.value=s),"can-cancel":!0,"on-cancel":I,"is-full-page":!1},null,8,["active"]),c(t).state.Lobby?(l(),r("div",P,[n("ul",W,[c(t).state.Lobby[0]?(l(),r("li",G,[n("p",q,i(c(t).state.Lobby[0].RoomId),1),(l(!0),r(x,null,y(c(t).state.Lobby[0].UserList,(s,d)=>(l(),r("p",{class:"font-thin text-sm inline",key:d},i(d+1)+"."+i(s)+"\xA0 ",1))),128))])):v("",!0),n("div",K,[(l(!0),r(x,null,y(c(t).state.othersRoom,s=>(l(),r("li",{key:s.RoomId,class:A([{"cursor-pointer":!s.IsFull,"bg-slate-300":!s.IsFull,"bg-red-900":s.IsFull,"bg-white":s.UserList.length==0},"rounded px-2 py-1"]),onClick:d=>L(s.RoomId)},[n("div",H,[n("p",J,[Q,n("span",X,i(s.RoomId),1)]),n("p",Y," Full: "+i(s.IsFull),1),n("p",Z," Type: "+i(s.RoomType),1),n("p",ee," Number of people: "+i(s.UserList.length),1)])],10,$))),128))])])])):v("",!0)])}}});export{ae as default};
